## 操作符

**操作符**:包括数学操作符,位操作符,关系操作符和相等操作符等.

**操作符应用范围**: 用于各种值,包括字符串,数值,布尔值,甚至对象.

注意:在应用给对象时,操作符通常会调用valueOf()或toString()方法取得可以计算的值.



### 3.5.1 一元操作符

#### 1.递增/递减操作符

都有两个版本:前缀版和后缀版. 前缀版是操作符位于要操作变量的前面,后缀版是操作符位于操作变量的后面.

递增操作符: 双加号(++);  递减操作符: 双减号(--);

前加加: 变量立即递增1, ++a的值是变量自增后的值

后加加: 变量立即递增1, a++的值是变量自增前的值

```js
let age = 29;
let anotherAge = --age + 2;

console.log(age);//28
console.log(anotherAge); //30
```



操作符与其他操作混用时,差异会变明显:

```js
let num1 = 2;
let num2 = 20;
let num3 = num1-- + num2;
let num4 = num1 + num2;

console.log(num3); //22
console.log(num4); //21
```



**使用范围:**

不限于整数, 字符串,布尔值,浮点值,对象

**遵循规则:**

字符串: 如果是有效数值形式,则转换为数值再应用改变. 变量类型从字符串变成数值.

字符串: 如果不是有效数值形式,将变量值设置为NaN.变量类型从字符串变为数值.

布尔值: 如果是false,则转换为0再应用改变. 类型从布尔值变成数值.

布尔值: 如果是true,则转换为1再应用改变. 类型从布尔值变成数值.

浮点值: 加1或减1

对象: 调用valueOf()方法取得可操作的值.对得到的值应用上述的规则.如果是NaN,则调用toString()并再次应用其他规则.变量类型从对象变为数值.

```js
let s1 = '2';
let s2 = 'z';
let b = false;
let f = 1.1;
let o = {
  valueOf(){return -1};
}

s1++; //值变成数值3
s2++; //值变成数值NaN
b++; //值变成数值1
f--; //值变成0.10000000000000009(因为浮点数不精确)
o--; //值变成数值-2
```



#### 2. 一元加/一元减

**2.1 作用:**

1.数学运算

2.类型转换

**2.2 一元加**

**一元加**放在变量前面,对数值没有任何影响,但对非数值来说会执行与Number()转型函数一样的类型转换:

布尔值false: 0

布尔值true: 1

字符串: 数值类型和非数值类型

对象: 调用valueOf()和/或toString()方法得到转换的值.

**2.3 一元减**

一元减由一个减号(-)表示,放在变量前面.主要用于把数值变成负值.

对数值使用一元减会将其变成相应的负值（如上面的例子所示）。在应用到非数值时，一元减会遵循与一元加同样的规则，先对它们进行转换，然后再取负值：



### 3.5.2 位操作符 //



### 3.5.3 布尔操作符

#### 1. 介绍

布尔操作符一共有3 个：逻辑非、逻辑与和逻辑或

#### 2. 逻辑非

逻辑非操作符由一个叹号（!）表示，可应用给ECMAScript 中的任何值。这个操作符始终返回布尔值，无论应用到的是什么数据类型。逻辑非操作符首先将操作数转换为布尔值，然后再对其取反。

 遵循如下规则:

| 操作数类型            | 返回布尔值 |
| --------------------- | ---------- |
| 对象                  | false      |
| 非空字符串            | false      |
| 非0数值(包括Infinity) | false      |
| 空字符串              | true       |
| 0                     | true       |
| null                  | true       |
| NaN                   | true       |
| undefined             | true       |



**类型转换**

同时使用两个叹号（!!），相当于调用了转型函数Boolean()。无论操作数是什么类型，第一个叹号总会返回布尔值。第二个叹号对该布尔值取反，从而给出变量真正对应的布尔值



#### 3. 逻辑与

逻辑与操作符由两个和号（&&）表示，应用到两个值

逻辑与操作符是一种**短路操作符**，意思就是如果第一个操作数决定了结果，那么永远不会对第二个操作数求值。对逻辑与操作符来说，如果第一个操作数是false，那么无论第二个操作数是什么值，结果也不可能等于true。

遵循如下规则: 两侧都是true才返回true

| 第一个操作数 | 第二个操作数 | 结果  |
| ------------ | ------------ | ----- |
| true         | true         | true  |
| true         | false        | false |
| false        | true         | false |
| false        | false        | false |

逻辑与操作符可用于任何类型的操作数，不限于布尔值。如果有操作数不是布尔值，则逻辑与并不一定会返回布尔值，而是遵循如下规则。逻辑与是用来找false的.

 如果第一个操作数是对象，则返回第二个操作数。
 如果第二个操作数是对象，则只有第一个操作数求值为true 才会返回该对象。
 如果两个操作数都是对象，则返回第二个操作数。
 如果有一个操作数是null，则返回null。
 如果有一个操作数是NaN，则返回NaN。
 如果有一个操作数是undefined，则返回undefined

```js
let a = null && true;
console.log(a); //null

let a = null && 1;
console.log(a); //0

let a = null && '1';
console.log(a); //null

let a = undefined && 1;
console.log(a); //undefined
```





#### 4. 逻辑或

逻辑或操作符由两个管道符（||）表示,遵循如下规则:

| 第一个操作数 | 第二个操作数 | 结果  |
| ------------ | ------------ | ----- |
| true         | true         | true  |
| true         | false        | true  |
| false        | true         | true  |
| false        | false        | false |

与逻辑与类似，如果有一个操作数不是布尔值，那么逻辑或操作符也不一定返回布尔值。它遵循如下规则。(逻辑或是来找true的.)

 如果第一个操作数是对象，则返回第一个操作数。
 如果第一个操作数求值为false，则返回第二个操作数。
 如果两个操作数都是对象，则返回第一个操作数。
 如果两个操作数都是null，则返回null。
 如果两个操作数都是NaN，则返回NaN。
 如果两个操作数都是undefined，则返回undefined

对逻辑或而言，第一个操作数求值为true，第二个操作数就不会再被求值了

**特性应用-变量赋值**

可以避免给变量赋值null 或undefined

```js
let myObj = preferOjbect || backupObject;

//解析:
1.变量myObject 会被赋予两个值中的一个
2.preferOjbect是首选的值,backupObject是备用值
3.如果preferObject是null,则backupObject的值会被赋给myObj.
```



### 3.5.4 乘性操作符

ECMAScript 定义了3 个乘性操作符：乘法、除法和取模. 但在处理非数值时，它们也会包含一些自动的类型转换.如果乘性操作符有
不是数值的操作数，则该操作数会在后台被使用Number()转型函数转换为数值



#### 1.乘法操作符

乘法操作符由一个星号（*）表示，可以用于计算两个数值的乘积

```js
let result = 34 * 56;
```

处理特殊值时遵循的规则:

* 如果ECMAScript 不能表示乘积，则返回Infinity 或-Infinity
* 如果有任一操作数是NaN，则返回NaN
* 如果是Infinity 乘以0，则返回NaN
* 如果是Infinity 乘以非0 的有限数值，则根据第二个操作数的符号返回Infinity 或-Infinity
* 如果是Infinity 乘以Infinity，则返回Infinity
* 如果有不是数值的操作数，则先在后台用Number()将其转换为数值，然后再应用上述规则



#### 2.除法操作符

除法操作符由一个斜杠（/）表示，用于计算第一个操作数除以第二个操作数的商

```js
被除数 / 除数 = 商;
let result = 66 / 11;
```



针对特殊值由一些特殊的行为:

* 如果ECMAScript不能表示商，则返回Infinity 或-Infinity
* 如果有任一操作数是NaN，则返回NaN
* 如果是Infinity 除以Infinity，则返回NaN
* 如果是0 除以0，则返回NaN
* 如果是非0 的有限值除以0，则根据第一个操作数的符号返回Infinity 或-Infinity; 非0数值除以Infinity/-Infinity,返回0/-0.
* 如果是Infinity 除以任何数值，则根据第二个操作数的符号返回Infinity 或-Infinity; 
* 如果有不是数值的操作数，则先在后台用Number()函数将其转换为数值，然后再应用上述规则



#### 3.取模操作符

取模（余数）操作符由一个百分比符号（%）表示

```js
let result = 26 % 5; //等于1
```



取模操作符对特殊值也有一些特殊的行为:

* 如果操作数是数值，则执行常规除法运算，返回余数
* 如果被除数是无限值，除数是有限值，则返回NaN
* 如果被除数是有限值，除数是0，则返回NaN
* 如果是Infinity 除以Infinity，则返回NaN。
* 如果被除数是有限值，除数是无限值，则返回被除数
* 如果被除数是0，除数不是0，则返回0
* 如果有不是数值的操作数，则先在后台用Number()函数将其转换为数值，然后再应用上述规则